2007-02-26  Miloslav Trmac  <mitr@redhat.com>

	* src/locate.c (write_quoted): Show only one question mark if the
	input string ends with an incomplete multibyte character.

	* src/locate.c (check_directory_perms): Reorganize to make the handling
	of "/" and top-level directories more clear.

	* doc/locate.1.in (DESCRIPTION): Fix punctuation.
	(NOTES): Note that locate may reorder the database path arbitrarily.

	* tests/config.at (config: -V)
	* tests/locate.at (locate: -V): Update for new copyright year.

	* gnulib/m4/gnulib-cache.m4 (gl_MODULES): Remove fwriterror (a typo).
	Remove timespec (a dependency of stat-time which mlocate doesn't use
	directly).

2007-02-21  Miloslav Trmac  <mitr@redhat.com>

	* README: Replace details by an unspecific promise.

	* configure.ac: Drop -Wnested-externs and -Wundef, gnulib's code can't
	handle them.

	* src/lib.c (htonll, ntohll, dir_path_cmp, db_open, db_refill)
	* src/updatedb.c (scan_subdirs, copy_old_dir, new_db_open): Use
	verify () instead of assert ().

	* src/lib.c (xmalloc, xrealloc): Remove in favor of gnulib's
	implementation.
	* src/lib.h (xmalloc, xrealloc): Remove declarations.

	* src/lib.c (db_refill): Use safe_read ().
	(db_read): Use mempcpy ().
	* src/locate.c (parse_dbpath): Use strchrnul () and mempcpy ().
	(parse_arguments, finish_dbpath): Use XNMALLOC ().
	* src/updatedb.c (time_get_ctime, time_get_mtime): Use
	get_stat_ctime_ns () and get_stat_mtime_ns ().

	* src/locate.c (main)
	* src/updatedb.c (main): Call set_program_name ().  Use fwriteerror ().

	* Makefile.am (ACLOCAL_AMFLAGS, AM_CPPFLAGS, SUBDIRS, src_locate_LDADD)
	(src_updatedb_LDADD)
	* configure.ac
	* src/conf.c
	* src/lib.c
	* src/lib.h
	* src/locate.c
	* src/updatedb.c
	* gnulib/m4/gnulib-cache.m4: Use gnulib, don't assume glibc.

2007-02-12  Miloslav Trmac  <mitr@redhat.com>

	* doc/locate.1.in: Fix a typo.

2007-01-29  Miloslav Trmac  <mitr@redhat.com>

	* doc/mlocate.db.5: Fix a pasto.

2007-01-16  Miloslav Trmac  <mitr@redhat.com>

	* doc/locate.1.in: Fix a typo in font change command.  (Reported by
	<esr@thyrsus.com>).

2006-11-16  Miloslav Trmac  <mitr@redhat.com>

	* configure.ac (AM_GNU_GETTEXT_VERSION): Update to 0.14.6.

2006-11-16  Miloslav Trmac  <mitr@redhat.com>

	* configure.ac: Version 0.15.
	* NEWS: Update.

	* configure.ac (PROC_MOUNTS_PATH): New test.
	* src/updatedb.c (MOUNT_TABLE_PATH): New macro, using PROC_MOUNTS_PATH.
	(filesystem_is_excluded): Use MOUNT_TABLE_PATH.

2006-03-15  Miloslav Trmac  <mitr@redhat.com>

	* src/conf.c (help): Add missing closing paren.
	(parse_arguments): Fix error message.

	* Makefile.am (DISTCLEANFILES, EXTRA_DIST, TESTFILES, clean-local)
	(check-local, installcheck-local, tests/package.m4, tests/testsuite)
	* configure.ac: Add test suite.
	* tests/config.at
	* tests/locate.at
	* tests/testsuite.at
	* tests/updatedb.at: New files.

2006-02-19  Miloslav Trmac  <mitr@redhat.com>

	* configure.ac: Version 0.14.
	* NEWS: Update.

	* README: Mention FNM_CASEFOLD requirement.

	* src/locate.c (_GNU_SOURCE): Define to get FNM_CASEFOLD.
	(conf_have_simple_pattern, conf_uppercase_patterns): New variables.
	(uppercase_string): Return a wide character string.
	(string_matches_pattern): Use FNM_CASEFOLD.  Use wcsstr () for
	case-insensitive simple pattern comparison.
	(parse_arguments): Leave conf_patterns in original case.  Set up
	conf_have_simple_pattern and conf_uppercase_patterns.
	(main): Leave uc_obstack with default alignment.

2006-02-15  Miloslav Trmac  <mitr@redhat.com>

	* configure.ac: Version 0.13.
	* NEWS: Update.

	* README: Describe what the "mlocate" group is for.

2006-02-14  Miloslav Trmac  <mitr@redhat.com>

	* Makefile.am (install-exec-hook): Make locate, not updatedb SGID.
	Oops.
	(install-exec-local): Make the database directory accessible by the
	mlocate group.

2005-12-31  Miloslav Trmac  <mitr@redhat.com>

	* configure.ac: Version 0.12.
	* NEWS: Update.

	* src/updatedb.c (time_get_ctime, time_get_mtime): Handle invalid
	nanosecond times returned by Captive NTFS.

2005-11-10  Miloslav Trmac  <mitr@redhat.com>

	* configure.ac: Version 0.11.
	* NEWS: Update.

	* Makefile.am (bin_PROGRAMS, libexec_PROGRAMS, install-exec-hook): Move
	updatedb to $(bindir).

2005-10-23  Miloslav Trmac  <mitr@redhat.com>

	* src/locate.c (parse_options): Actually set got_follow to 1 when
	necessary.

2005-08-04  Miloslav Trmac  <mitr@redhat.com>

	* src/locate.c (conf_output_quote): New variable.
	(write_quoted): New function.
	(parse_options): Set conf_output_quote if writing to stdout without
	--null.
	(handle_path): Implement conf_output_quote.
